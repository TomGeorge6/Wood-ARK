# 常见问题解答（FAQ）

本文档整理了 Wood-ARK 使用过程中的常见问题和解决方案。

---

## 📊 数据相关

### Q1: 为什么历史数据是空的？之前不是有数据吗？

**A**: 历史数据来源发生了变化：

**之前（v1.0）**:
- 使用 GitHub 镜像（thisjustinh/ark-invest-history）
- 数据已过时，停止在 2021-09-08
- 之前下载的 CSV 文件存在格式错误（缺少逗号分隔符）

**现在（v2.0）**:
- 使用 ARKFunds.io API（实时数据）⭐
- API 仅提供当日最新数据（无历史数据）
- 采用**每日自动累积**策略

**解决方案**:
- ✅ 每天定时运行，自然累积历史数据
- ✅ 30天后激活1个月趋势图
- ✅ 90天后激活3个月趋势图

详见：[部署指南 - 数据累积策略](DEPLOYMENT.md#数据累积策略)

---

### Q2: 报告中的"百分比"是怎么计算的？

**A**: 系统涉及三种百分比：

#### 1. 权重（weight）
**定义**: 单只股票市值 / 基金总资产 × 100%

**来源**: ARK 官方数据（CSV 中的 `weight` 字段）

**示例**:
- TSLA 在 ARKK 中权重 11.9%
- 表示 TSLA 占 ARKK 总资产的 11.9%

#### 2. 持仓变化百分比
**定义**: (今日持股数 - 昨日持股数) / 昨日持股数 × 100%

**用途**: 显示增持/减持幅度

**示例**:
- 昨日持股 100万，今日 110万
- 变化百分比 = (110-100)/100 × 100% = +10%

#### 3. 跨基金总权重
**定义**: 某股票在所有持有基金中的权重之和

**用途**: 汇总报告中显示核心持仓

**示例**:
- AMD 在 ARKW 中权重 7.0%
- AMD 在 ARKQ 中权重 5.2%
- 跨基金总权重 = 7.0% + 5.2% = 12.2%

---

### Q3: 趋势图的 Y 轴单位是什么？

**A**: 趋势图 Y 轴显示**持股数**（不是权重）：

**格式化规则**:
- 大于 100万: 显示为 M（Million）
  - 例：1,234,567 → 1.2M
- 小于 100万: 显示为 K（Thousand）
  - 例：345,000 → 345K

**为什么用持股数而非权重**:
- 权重受基金总资产影响（股价涨跌导致权重变化）
- 持股数直接反映 Wood 姐的买卖行为
- 更准确地展现调仓意图

---

### Q4: 数据是实时的吗？

**A**: 准实时（T+1 日更新）：

**更新时间**:
- ARK 官方：美东时间每个交易日 19:00 更新
- 北京时间：次日 07:00（夏令时）或 08:00（冬令时）

**系统执行时间**:
- 默认：北京时间 19:00
- 此时数据已更新 10+ 小时

**延迟说明**:
- 数据反映的是前一交易日收盘时的持仓
- 例：11月14日 19:00 收到的报告显示 11月13日的持仓

---

## 🔧 功能相关

### Q5: 为什么今天没收到推送？

**可能原因**:

#### 1. 今天是周末或节假日
- 系统仅在周一到周五执行
- ARK 在非交易日不更新数据

#### 2. 电脑关机/休眠
- Launchd 任务需要电脑开机
- 解决方案：运行 `python3 main.py --check-missed` 补偿

#### 3. 定时任务未加载
```bash
# 检查任务状态
launchctl list | grep wood-ark

# 如果没有输出，重新加载
./scripts/setup_launchd.sh
```

#### 4. 网络故障
```bash
# 查看日志
tail -50 logs/wood_ark.log

# 测试网络
python3 main.py --test-webhook
```

---

### Q6: 可以只接收汇总报告，不要单基金详情吗？

**A**: 不建议，但可以配置：

修改 `config.yaml`:
```yaml
data:
  etfs: []  # 清空列表，不处理单基金
```

**⚠️ 警告**:
- 汇总报告依赖单基金数据
- 清空 `etfs` 后无法生成汇总报告
- 建议保留完整配置，在企业微信设置消息免打扰

---

### Q7: Top 10 中某只股票消失了，是卖出了吗？

**A**: 不一定，有三种可能：

#### 1. 完全卖出
- 股票从持仓列表中完全消失
- 报告会显示在"移除持仓"板块

#### 2. 权重下降
- 股票仍在持仓，但不再是 Top 10
- 检查完整持仓列表（长图底部）

#### 3. 其他股票涨幅更大
- 持股数未变，但权重被稀释
- 例：TSLA 股价大涨，其他股票相对权重下降

---

### Q8: 汇总报告中的"独家持仓"是什么意思？

**A**: 独家持仓指：

**定义**:
- 仅在单一基金中持有
- 且权重 ≥ 3%（可配置）

**用途**:
- 展示各基金的特色投资
- 发现小众但潜力大的股票

**示例**:
- CRSP 仅在 ARKG 中持有（权重 4.2%）
- 说明这是 ARKG 的独家生物科技股票

---

## ⚙️ 配置相关

### Q9: 如何修改执行时间？

**A**: 修改 `config.yaml`:

```yaml
schedule:
  cron_time: "11:00"  # 改为上午 11:00
```

**生效时间**: 下次执行时自动生效，无需重启。

**推荐时间**:
- `19:00` - 下班后查看（推荐）
- `11:00` - 早上查看前一日数据
- `08:00` - 数据刚更新时（可能不稳定）

---

### Q10: 如何调整"显著变化"阈值？

**A**: 修改 `config.yaml`:

```yaml
analysis:
  change_threshold: 3.0  # 改为 3%（更敏感）
```

**推荐值**:
- `3.0` - 激进投资者（捕捉更多变化）
- `5.0` - 普通投资者（默认）✅
- `10.0` - 保守投资者（仅看重大调整）

**影响**:
- 阈值越低，报告中显示的变化越多
- 阈值越高，报告越简洁

---

### Q11: Webhook URL 泄露了怎么办？

**A**: 立即更换：

```bash
# 1. 企业微信删除旧机器人
# 2. 创建新机器人，复制新 URL

# 3. 更新 .env
nano .env
# 粘贴新 URL

# 4. 测试
python3 main.py --test-webhook
```

**安全建议**:
- 不要在公开仓库提交 `.env` 文件
- 使用 `.gitignore` 忽略 `.env`
- 定期更换 Webhook URL

---

## 🐛 故障排除

### Q12: 报错"WECHAT_WEBHOOK_URL 未配置"

**原因**: `.env` 文件缺失或配置错误

**解决方案**:
```bash
# 1. 检查文件是否存在
ls -la .env

# 2. 如果不存在，创建
cp .env.example .env

# 3. 编辑并填写 URL
nano .env

# 4. 验证
python3 main.py --test-webhook
```

---

### Q13: 推送失败，提示"图片过大"

**原因**: 企业微信限制单张图片 ≤ 20MB

**解决方案**:
1. 检查图片大小
   ```bash
   ls -lh data/images/COMBINED/*.png
   ```

2. 如果 >20MB，可能是历史数据过多
   - 减少趋势图时间范围（`config.yaml`）
   - 或分段推送（暂不支持）

---

### Q14: 长图显示"历史数据累积中"

**原因**: 历史数据不足 30 天

**解决方案**:
- ✅ 等待系统自动累积（每天运行）
- ✅ 30天后自动激活1个月趋势图
- ✅ 90天后自动激活3个月趋势图

**加速方法**（如果有历史数据源）:
```bash
# 手动放置 CSV 文件
data/holdings/ARKK/2025-11-01.csv
data/holdings/ARKK/2025-11-02.csv
...
```

---

### Q15: 某个 ETF 下载失败，其他正常吗？

**A**: 是的，系统采用**部分成功策略**：

**行为**:
- 单个 ETF 失败不影响其他 ETF
- 失败的 ETF 会在日志中记录错误
- 汇总报告会标注失败的基金

**示例**:
```
[INFO] 处理 ARKK... ✅
[INFO] 处理 ARKW... ✅
[ERROR] 处理 ARKG 失败: 网络超时
[INFO] 处理 ARKQ... ✅
[INFO] 处理 ARKF... ✅
[INFO] 生成汇总报告（基于 4 个成功基金）
```

---

## 📈 投资相关

### Q16: 汇总报告中的"核心持仓"有什么意义？

**A**: 核心持仓 = 跨基金重叠股票（同时出现在 2+ 基金中）

**意义**:
1. **Wood 姐最看好的股票**
   - 跨基金配置说明投资信心强
   
2. **多赛道布局**
   - 例：TSLA 横跨创新（ARKK）、互联网（ARKW）、自动化（ARKQ）
   
3. **投资权重最大**
   - 跨基金总权重 = 单一股票的最大投资比例

**投资建议**:
- 优先关注出现在 3+ 基金中的股票
- 总权重 >20% 的股票是 Wood 姐的核心仓位

---

### Q17: 如何判断 Wood 姐对某个赛道的信心？

**A**: 综合多个指标：

#### 1. 单基金权重
- 某赛道龙头在对应基金中的权重
- 例：TSLA 在 ARKK 中权重 11.9%（高信心）

#### 2. 跨基金分布
- 同一股票出现在多少个基金中
- 例：TSLA 出现在 ARKK、ARKW、ARKQ（极高信心）

#### 3. 持仓变化趋势
- 近期是持续加仓还是减仓
- 查看 1个月和3个月趋势图

#### 4. 独家持仓数量
- 某基金的独家持仓越多，说明该赛道布局越深
- 例：ARKG 有 10+ 独家生物科技股（深度布局）

---

### Q18: "被3只基金同时增持"是强烈看好信号吗？

**A**: 是的，通常表示：

**信号强度**:
- 1个基金增持：正常调仓
- 2个基金同时增持：值得关注
- 3+个基金同时增持：**强烈看好** ⭐

**历史案例**（示例）:
- TSLA 在 2020 年被 3 个基金同时大幅增持
- 随后股价涨幅 >500%

**⚠️ 风险提示**:
- 这不是投资建议
- Wood 姐也会犯错（如 ARKK 2021-2022 年回撤 >70%）
- 请结合自己的研究和风险承受能力

---

## 💡 使用技巧

### Q19: 如何快速查看某只股票的持仓变化？

**A**: 使用长图报告：

1. **单基金长图**:
   - Part 2: 持仓变化柱状图（显著增减持）
   - Part 3: Top 10 个股趋势图（核心持仓）
   - Part 5: 完整持仓列表（所有股票）

2. **汇总长图**:
   - Part 2: 跨基金重叠 Top 10 + 趋势
   - Part 4: 独家持仓亮点

**技巧**: 在企业微信中保存图片，随时查看。

---

### Q20: 如何备份历史数据？

**A**: 数据已保存在本地，定期备份即可：

```bash
# 备份整个 data 目录
cp -r data data_backup_$(date +%Y%m%d)

# 仅备份 CSV 数据
tar -czf holdings_backup_$(date +%Y%m%d).tar.gz data/holdings/

# 仅备份长图
tar -czf images_backup_$(date +%Y%m%d).tar.gz data/images/
```

**云备份**（可选）:
- 使用 iCloud/Dropbox/Google Drive 同步 `data` 目录
- 或使用 `rsync` 定期推送到远程服务器

---

## 📚 更多帮助

### 相关文档
- [使用指南](USAGE.md) - 详细命令参数
- [配置说明](CONFIGURATION.md) - 所有配置项
- [部署指南](DEPLOYMENT.md) - 安装与自动化
- [汇总功能指南](SUMMARY_FEATURE_GUIDE.md) - 汇总报告详解

### 获取支持
- **查看日志**: `tail -f logs/wood_ark.log`
- **测试功能**: `python3 main.py --manual`
- **检查配置**: `python3 main.py --test-webhook`

---

**最后更新**: 2025-11-14  
**版本**: v2.0  
**问题总数**: 20 个
