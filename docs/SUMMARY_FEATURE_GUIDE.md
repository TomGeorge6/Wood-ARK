# ARK 全系列基金汇总报告功能指南

## 📊 功能概述

全新的**ARK 全系列基金汇总报告**功能，提供所有5只ARK ETF的全局视角，帮助您：
- 一眼看穿 Wood 姐的整体投资布局
- 发现跨基金的核心持仓（Wood 姐最看好的股票）
- 对比各基金的投资重点
- 追踪重要变化（多基金同时增持/减持）

---

## 🎯 推送内容

### 每天推送 **6 条消息**：

1. **汇总报告** × 1 条
   - 包含所有5只基金的综合分析
   - 卡片式 Markdown + 长图

2. **单基金详情** × 5 条
   - ARKK、ARKW、ARKG、ARKQ、ARKF 各1条
   - 每个基金的详细持仓变化

---

## 📋 汇总报告内容

### 1. 企业微信推送（方案C - 卡片式）

```markdown
📊 ARK 全系列基金监控日报
🗓️ 2025-11-14

━━━━━━━━━━━━━━━━━━━━━
📈 今日概况
· 总持仓: 195 只
· 跨基金重叠: 42 只
· 单基金独有: 153 只

🔥 核心持仓 Top 5
1. TSLA 33.57% (3基金) 📈
   ARKQ 11.92% | ARKK 11.96% | ARKW 9.69%
   
2. COIN 17.11% (3基金)
   ARKK 5.65% | ARKF 6.35%
...

━━━━━━━━━━━━━━━━━━━━━
📋 各基金快速对比

🚀 ARKK ⭐ 创新 ETF
破坏性创新技术... | 48 只
Top 3: TSLA 11.9% · ROKU 5.8% · COIN 5.7%

🌐 ARKW 下一代互联网
互联网/云/区块链... | 45 只
Top 3: TSLA 9.7% · AMD 7.0% · BTC-ETF 6.1%
...

━━━━━━━━━━━━━━━━━━━━━
💡 今日亮点
· 📈 TSLA 被 3 只基金同时增持
· 🆕 PLTR 从单基金变为跨基金持仓

详细报告见长图 👇
[图片]
```

### 2. 长图内容（方案A - 分层级）

长图包含 **5 大部分**：

#### Part 1: 📊 统计摘要（最重要）
- 5只基金对比表格
  - 基金名称、中文名、投资方向
  - 持仓数量、Top 1 持仓
  - ARKK 标注 ⭐ 旗舰基金
- 关键数字
  - 总持仓数、跨基金重叠数、独有数
- 投资提示
  - "ARKK 是 Wood 姐的旗舰基金，涵盖最全面的创新技术投资"

#### Part 2: 🔥 跨基金重叠 Top 10 + 趋势
- 表格显示重叠股票
  - 股票代码、公司名称
  - 出现基金数、总权重
  - 各基金分布（如：ARKK 11.9% | ARKW 9.7%）
- **1个月 + 3个月趋势图**
  - 重叠股票在各基金中的权重变化

#### Part 3: 📈 各基金 Top 5 持仓
- 5个子表格
- 每个基金显示 Top 5 股票
- 标注昨日变化（↑增持 ↓减持 →持平）

#### Part 4: 💎 独家持仓亮点
- 仅在单一基金中的特色股票
- 筛选条件：权重 ≥ 3%
- 各基金最多显示 3 只

#### Part 5: 🎯 今日重点变化
- 被多个基金同时增持/减持的股票
- 新增的跨基金股票
- 从独家变为跨基金的股票
- 最多显示 5 条

---

## 🚀 使用方法

### 自动执行（每天定时）

配置文件 `config.yaml`:
```yaml
schedule:
  enabled: true
  cron_time: "11:00"  # 北京时间 11:00
  timezone: "Asia/Shanghai"
```

系统会自动：
1. 周一到周五 11:00 执行
2. 下载所有5只基金的数据
3. 生成5个单基金报告 + 1个汇总报告
4. 推送6条企业微信消息

### 手动执行

```bash
# 手动触发（推送内容与自动执行完全一致）
python3 main.py --manual

# 输出示例：
# [1/6] 处理 ARKK...
# [2/6] 处理 ARKW...
# [3/6] 处理 ARKG...
# [4/6] 处理 ARKQ...
# [5/6] 处理 ARKF...
# [6/6] 生成汇总报告...
# ✅ 所有报告已推送
```

### 测试汇总功能

```bash
# 仅测试汇总报告生成（不推送）
python3 scripts/test_summary.py

# 输出包括：
# - 数据下载状态
# - 汇总分析结果
# - 长图生成路径
# - 推送内容预览
```

---

## 📊 数据来源

**100% 真实数据，绝无模拟**

- 数据源：**ARKFunds.io API**
  - 开源项目：https://github.com/frefrik/ark-invest-api
  - 数据来源：ARK Invest 官方
  - 更新频率：每个交易日
  - 可靠性：⭐⭐⭐⭐⭐

详见：[真实数据源文档](REAL_DATA_SOURCE.md)

---

## 🔍 核心亮点

### 1. 跨基金重叠股票分析

**问题解决**：哪些股票是 Wood 姐最看好的？

**答案**：同时出现在 2+ 基金中的股票

**示例**：
- TSLA 出现在 3 只基金（ARKK、ARKW、ARKQ），总权重 33.57%
- 这说明 Wood 姐对特斯拉高度看好，横跨创新、互联网、自动化三大赛道

### 2. 各基金投资方向一目了然

```
🚀 ARKK - 破坏性创新技术（AI、电动车、太空探索）⭐ 旗舰
🌐 ARKW - 互联网、云计算、区块链、元宇宙
🧬 ARKG - 基因编辑、精准医疗、生物科技
🤖 ARKQ - 自动驾驶、机器人、航天、3D打印
💰 ARKF - 数字支付、区块链、金融创新、DeFi
```

### 3. 对比昨日变化（重点）

- ✅ 被多个基金同时增持 → 强烈看好信号
- ✅ 新增跨基金持仓 → 新的核心布局
- ✅ 从独家变跨基金 → 投资信心增强

---

## 📁 文件结构

```
data/
├── images/
│   ├── ARKK/
│   │   └── 2025-11-14_comprehensive.png  # 单基金长图
│   ├── ARKW/
│   ├── ARKG/
│   ├── ARKQ/
│   ├── ARKF/
│   └── SUMMARY/
│       └── 2025-11-14_summary.png        # 汇总长图 ⭐
└── holdings/
    ├── ARKK/
    │   └── 2025-11-14.csv
    ├── ARKW/
    ├── ARKG/
    ├── ARKQ/
    └── ARKF/
```

---

## ❓ 常见问题

### Q1: 为什么要汇总报告？单个基金报告不够吗？

**A**: 单个基金报告适合深入分析，汇总报告提供全局视角。

**场景举例**：
- 发现 TSLA 在 ARKK、ARKW、ARKQ 三个基金中都排 Top 3
- 这比单看某个基金更能体现 Wood 姐对特斯拉的整体看好程度

### Q2: 汇总报告和单基金报告的推送顺序？

**A**: 建议顺序（已在代码中实现）：
1. 先推送汇总报告（全局视角）
2. 再推送各单基金详情（深入分析）

这样您可以先看大局，再看细节。

### Q3: 如果某个基金下载失败，还会生成汇总报告吗？

**A**: 会，但有最低要求：
- 至少成功 2 个基金才生成汇总
- 如果只成功 1 个或全部失败，跳过汇总

### Q4: 汇总报告的趋势图是什么周期？

**A**: 1个月 + 3个月（与单基金报告一致）

### Q5: 可以只看汇总报告，不推送单基金报告吗？

**A**: 不建议。
- 汇总报告：宏观视角，适合快速浏览
- 单基金报告：详细变化，适合深度分析
- 两者结合才能全面了解 Wood 姐的投资动态

---

## 🎯 投资建议

### 基于汇总报告的投资思路：

1. **跨基金重叠 Top 10** = Wood 姐最核心的持仓
   - 优先关注出现在 3 只基金中的股票
   - 总权重越高，投资信心越强

2. **ARKK 旗舰基金** = 最全面的选择
   - 如果只选一只 ETF，选 ARKK
   - 涵盖所有创新领域，分散风险

3. **独家持仓** = 各基金的特色机会
   - ARKG 的独家持仓 → 前沿生物科技
   - ARKF 的独家持仓 → 新兴金融科技

4. **多基金同时增持** = 强烈看好信号
   - 重点关注这些股票
   - 可能是 Wood 姐发现的新机会

---

## 📝 更新日志

**版本**: v2.0  
**日期**: 2025-11-14  

**新增功能**:
- ✅ ARK 全系列基金汇总分析
- ✅ 跨基金重叠股票追踪
- ✅ 各基金对比表格
- ✅ 独家持仓亮点
- ✅ 重点变化提示
- ✅ 卡片式微信推送
- ✅ 汇总报告长图

**技术实现**:
- 新增模块：`src/summary_analyzer.py`
- 新增模块：`src/summary_notifier.py`
- 扩展模块：`src/image_generator.py`
- 集成到：`main.py`

---

**最后更新**: 2025-11-14  
**作者**: Lucian  
**项目**: Wood-ARK
